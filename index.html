<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MANOJ B - Aspiring Data Analyst</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/scrollreveal"></script>
    <style>
        :root {
            --bg-light: #f8f9fa;
            --text-light: #212529;
            --card-light: #ffffff;
            --border-light: #e9ecef;

            --bg-dark: #1a1d24;
            --text-dark: #e9ecef;
            --card-dark: #212529;
            --border-dark: #343a40;
            
            --primary: #20c997; /* Teal */
            --secondary: #ff6b6b; /* Coral */
            --accent: #4dabf7; /* Blue */
        }
        
        html.dark {
            --bg-main: var(--bg-dark);
            --text-main: var(--text-dark);
            --card-bg: var(--card-dark);
            --border-color: var(--border-dark);
        }

        html:not(.dark) {
            --bg-main: var(--bg-light);
            --text-main: var(--text-light);
            --card-bg: var(--card-light);
            --border-color: var(--border-light);
        }

        body {
            background-color: var(--bg-main);
            color: var(--text-main);
            font-family: 'Roboto', sans-serif;
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
        }

        .text-primary { color: var(--primary); }
        .bg-primary { background-color: var(--primary); }
        .border-primary { border-color: var(--primary); }
        .hover\:bg-primary-dark:hover { background-color: #1aa07a; }

        .text-secondary { color: var(--secondary); }
        .bg-secondary { background-color: var(--secondary); }
        
        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            transition: background-color 0.5s ease, border-color 0.5s ease, transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .nav-blur {
            background: rgba(248, 249, 250, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-light);
        }
        .dark .nav-blur {
            background: rgba(26, 29, 36, 0.7);
            border-bottom: 1px solid var(--border-dark);
        }

        /* Scroll-reveal animations will be invisible until revealed */
        .reveal {
            visibility: hidden;
        }
        
        .contact-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        /* Loader for AI Section */
        .loader {
            width: 48px;
            height: 48px;
            border: 5px solid var(--text-main);
            border-bottom-color: transparent;
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }

        @keyframes rotation {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

    </style>
</head>
<body class="antialiased">

    <!-- Theme Toggle -->
    <button id="theme-toggle" class="fixed top-5 right-5 z-50 p-2.5 rounded-full card shadow-lg">
        <i id="theme-icon" data-lucide="moon" class="h-5 w-5 text-main"></i>
    </button>

    <!-- Header -->
    <header id="header" class="fixed top-0 left-0 w-full z-40 nav-blur transition-shadow duration-300">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-3xl font-bold text-primary">MB.</a>
            <nav class="hidden md:flex items-center space-x-8">
                <a href="#about" class="text-sm font-medium hover:text-primary transition-colors">About</a>
                <a href="#projects" class="text-sm font-medium hover:text-primary transition-colors">Projects</a>
                <a href="#skills" class="text-sm font-medium hover:text-primary transition-colors">Skills</a>
                <a href="#ai-hub" class="text-sm font-medium hover:text-primary transition-colors">✨ AI Hub</a>
                <a href="#contact" class="text-sm font-medium hover:text-primary transition-colors">Contact</a>
            </nav>
            <button class="md:hidden" id="mobile-menu-button">
                <i data-lucide="menu" class="h-6 w-6"></i>
            </button>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden pb-4">
            <a href="#about" class="block py-2 px-6 text-sm">About</a>
            <a href="#projects" class="block py-2 px-6 text-sm">Projects</a>
            <a href="#skills" class="block py-2 px-6 text-sm">Skills</a>
            <a href="#ai-hub" class="block py-2 px-6 text-sm">✨ AI Hub</a>
            <a href="#contact" class="block py-2 px-6 text-sm">Contact</a>
        </div>
    </header>

    <main class="container mx-auto px-6">

        <!-- Hero Section -->
        <section id="hero" class="min-h-screen flex items-center pt-24 md:pt-0">
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div class="text-center md:text-left">
                    <p class="text-primary font-semibold text-lg reveal" data-reveal-delay="100">Hello, I'm Manoj B.</p>
                    <h1 class="text-5xl md:text-7xl font-bold mt-2 reveal" data-reveal-delay="200">Aspiring<br>Data Analyst</h1>
                    <p class="mt-6 text-lg opacity-80 max-w-lg mx-auto md:mx-0 reveal" data-reveal-delay="300">I turn data into insights. Passionate about uncovering stories hidden in datasets and building powerful visualizations.</p>
                    <div class="mt-10 flex flex-wrap items-center justify-center md:justify-start gap-4 reveal" data-reveal-delay="400">
                        <a href="#contact" class="bg-primary text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-primary-dark transition-all duration-300 transform hover:scale-105">Let's Talk</a>
                        <a href="https://resume.almagrow.com/manoj2882003/data-analyst" target="_blank" rel="noopener noreferrer" class="card font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center gap-2">
                            <i data-lucide="file-text" class="h-5 w-5"></i>
                            <span>View Resume</span>
                        </a>
                        <div class="flex gap-4">
                             <a href="https://wa.me/919538395727" target="_blank" rel="noopener noreferrer" class="card p-3 rounded-full shadow-lg hover:shadow-xl transform hover:scale-110 transition-all duration-300" aria-label="WhatsApp">
                                <i data-lucide="message-circle" class="h-6 w-6 text-green-500"></i>
                            </a>
                            <a href="https://linkedin.com/in/manoj-b-390821218" target="_blank" rel="noopener noreferrer" class="card p-3 rounded-full shadow-lg hover:shadow-xl transform hover:scale-110 transition-all duration-300" aria-label="LinkedIn">
                                <i data-lucide="linkedin" class="h-6 w-6 text-blue-500"></i>
                            </a>
                            <a href="https://github.com/manojDOX" target="_blank" rel="noopener noreferrer" class="card p-3 rounded-full shadow-lg hover:shadow-xl transform hover:scale-110 transition-all duration-300" aria-label="GitHub">
                                <i data-lucide="github" class="h-6 w-6"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="relative flex justify-center items-center reveal" data-reveal-delay="500">
                    <div class="w-72 h-72 md:w-96 md:h-96 rounded-full bg-primary/20"></div>
                    <div class="absolute w-72 h-96 md:w-80 md:h-[450px] card rounded-3xl overflow-hidden shadow-2xl transform rotate-3">
                         <img src="https://placehold.co/400x500/20c997/1a1d24?text=MB" alt="Manoj B" class="w-full h-full object-cover">
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="py-24">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold reveal">About Me</h2>
                <p class="text-lg opacity-70 mt-2 reveal">My journey and what drives me.</p>
            </div>
            <div class="max-w-3xl mx-auto card p-8 md:p-12 rounded-2xl shadow-xl reveal">
                <p id="summary-content" class="text-lg leading-relaxed opacity-90"></p>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="py-24">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold reveal">My Projects</h2>
                <p class="text-lg opacity-70 mt-2 reveal">A glimpse into my data explorations.</p>
            </div>
            <div id="projects-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Project cards will be injected here -->
            </div>
        </section>

        <!-- Skills Section -->
        <section id="skills" class="py-24">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold reveal">Core Competencies</h2>
                <p class="text-lg opacity-70 mt-2 reveal">The tools and technologies I use.</p>
            </div>
            <div id="skills-container" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Skills will be injected here -->
            </div>
        </section>

        <!-- AI Project Hub Section -->
        <section id="ai-hub" class="py-24">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold reveal">✨ AI Project Hub</h2>
                <p class="text-lg opacity-70 mt-2 reveal">Get instant data analysis project ideas powered by Gemini.</p>
            </div>
            <div class="max-w-xl mx-auto card p-8 rounded-2xl shadow-xl reveal">
                <div class="flex flex-col sm:flex-row gap-4">
                    <input type="text" id="ai-prompt-input" class="flex-grow p-3 rounded-lg bg-transparent border-2 border-border-color focus:border-primary focus:outline-none transition-colors" placeholder="Enter a topic (e.g., 'e-commerce')">
                    <button id="generate-ideas-btn" class="bg-primary text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:bg-primary-dark transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2">
                        <i data-lucide="sparkles" class="h-5 w-5"></i>
                        <span>Generate Ideas</span>
                    </button>
                </div>
                 <div id="api-key-status" class="text-xs text-center mt-4 opacity-60"></div>
            </div>
            <div id="ai-results-container" class="mt-12 grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- AI-generated project ideas will appear here -->
            </div>
             <div id="ai-loader" class="text-center mt-12 hidden">
                <div class="loader mx-auto"></div>
                <p class="mt-4 opacity-70">Generating ideas with Gemini...</p>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-24">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold reveal">Let's Connect</h2>
                <p class="text-lg opacity-70 mt-2 reveal">Have a project in mind or just want to say hi?</p>
            </div>
            <div class="max-w-4xl mx-auto grid md:grid-cols-2 gap-8">
                <!-- Email Card -->
                <div class="card contact-card p-8 rounded-2xl shadow-lg reveal flex flex-col justify-between">
                    <div class="flex items-center gap-4">
                        <div class="p-3 rounded-full bg-red-500/10">
                           <i data-lucide="mail" class="h-8 w-8 text-red-500"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold">Email</h3>
                            <p class="opacity-70">manoj2882003@gmail.com</p>
                        </div>
                    </div>
                    <button id="copy-email-btn" class="mt-6 w-full bg-primary text-white font-bold py-3 rounded-lg shadow-lg hover:bg-primary-dark transition-all duration-300 transform hover:scale-105">
                        Copy Email
                    </button>
                </div>
                <!-- WhatsApp Card -->
                <a href="https://wa.me/919538395727" target="_blank" rel="noopener noreferrer" class="card contact-card p-8 rounded-2xl shadow-lg block reveal flex flex-col justify-between">
                    <div class="flex items-center gap-4">
                        <div class="p-3 rounded-full bg-green-500/10">
                           <i data-lucide="message-circle" class="h-8 w-8 text-green-500"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold">WhatsApp</h3>
                            <p class="opacity-70">+91 95383 95727</p>
                        </div>
                    </div>
                     <div class="text-center mt-6 w-full bg-primary text-white font-bold py-3 rounded-lg shadow-lg hover:bg-primary-dark transition-all duration-300 transform group-hover:scale-105">Send a Message</div>
                </a>
                <!-- LinkedIn Card -->
                <a href="https://linkedin.com/in/manoj-b-390821218" target="_blank" rel="noopener noreferrer" class="card contact-card p-8 rounded-2xl shadow-lg block reveal flex flex-col justify-between">
                    <div class="flex items-center gap-4">
                        <div class="p-3 rounded-full bg-blue-500/10">
                           <i data-lucide="linkedin" class="h-8 w-8 text-blue-500"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold">LinkedIn</h3>
                            <p class="opacity-70">Connect with me professionally</p>
                        </div>
                    </div>
                     <div class="text-center mt-6 w-full bg-primary text-white font-bold py-3 rounded-lg shadow-lg hover:bg-primary-dark transition-all duration-300 transform group-hover:scale-105">View Profile</div>
                </a>
                <!-- GitHub Card -->
                <a href="https://github.com/manojDOX" target="_blank" rel="noopener noreferrer" class="card contact-card p-8 rounded-2xl shadow-lg block reveal flex flex-col justify-between">
                    <div class="flex items-center gap-4">
                        <div class="p-3 rounded-full bg-gray-500/10">
                           <i data-lucide="github" class="h-8 w-8 text-gray-500"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold">GitHub</h3>
                            <p class="opacity-70">Check out my code</p>
                        </div>
                    </div>
                    <div class="text-center mt-6 w-full bg-primary text-white font-bold py-3 rounded-lg shadow-lg hover:bg-primary-dark transition-all duration-300 transform group-hover:scale-105">View Repositories</div>
                </a>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="border-t border-border-color mt-24">
        <div class="container mx-auto px-6 py-8 flex flex-col md:flex-row justify-between items-center text-center md:text-left">
            <p class="opacity-70 text-sm">&copy; 2025 MANOJ B. Crafted with passion.</p>
            <div id="social-links" class="flex space-x-6 mt-6 md:mt-0">
                <!-- Social links will be injected here -->
            </div>
        </div>
    </footer>
    
    <!-- API Key Modal -->
    <div id="api-key-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm hidden">
        <div class="card p-8 rounded-2xl shadow-2xl max-w-md w-full mx-4">
            <div class="flex justify-between items-center">
                <h3 class="text-2xl font-bold">Enter Your Gemini API Key</h3>
                <button id="close-modal-btn"><i data-lucide="x" class="h-6 w-6 opacity-70 hover:opacity-100"></i></button>
            </div>
            <p class="mt-4 opacity-80">To use the AI Project Hub, please provide your own Google Gemini API key. Your key will only be stored in your browser for this session and will not be shared.</p>
            <input type="password" id="api-key-input" class="mt-4 w-full p-3 rounded-lg bg-transparent border-2 border-border-color focus:border-primary focus:outline-none transition-colors" placeholder="Paste your API key here">
            <a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener noreferrer" class="text-sm text-primary hover:underline mt-2 inline-block">Get a free API key from Google AI Studio &rarr;</a>
            <button id="save-key-btn" class="mt-6 w-full bg-primary text-white font-bold py-3 rounded-lg shadow-lg hover:bg-primary-dark transition-all duration-300">Save & Generate</button>
        </div>
    </div>

    <!-- Copy Notification -->
    <div id="copy-notification" class="fixed bottom-5 right-5 bg-primary text-white py-2 px-4 rounded-lg shadow-lg opacity-0 translate-y-4 transition-all duration-300">
        Email copied to clipboard!
    </div>

    <script>
        const resumeData = {
          "basics": {
            "name": "MANOJ B",
            "headline": "Aspiring Data Analyst",
            "email": "manoj2882003@gmail.com",
            "summary": "Enthusiastic and detail-focused Data Analyst with hands-on experience in <strong>SQL</strong>, <strong>Excel</strong>, and <strong>Python</strong>. Built projects involving real-world datasets and created dashboards using <strong>Power BI</strong>. Strong interest in solving business problems using data. Quick learner, excited to grow and contribute to a data-driven team."
          },
          "profiles": [
            { "network": "LinkedIn", "url": "https://linkedin.com/in/manoj-b-390821218", "icon": "linkedin" },
            { "network": "GitHub", "url": "https://github.com/manojDOX", "icon": "github" }
          ],
          "projects": [
            { "name": "Amazon Prime Videos Analysis (EDA)", "summary": "Modeled 5+ years of transactional data using Python to identify key sales drivers and forecast future revenue streams.", "keywords": ["EDA", "Python","Pandas","MatPlotlib","Seaborn"], "url": "https://github.com/manojDOX/Amazon-EDA-Report", "imageUrl": "https://static.vecteezy.com/system/resources/previews/046/437/251/non_2x/amazon-prime-logo-free-png.png" },
            { "name": "Play Store App Review Analysis", "summary": "Analyzed 10,000+ user reviews using Python to uncover sentiment patterns and common complaints.", "keywords": ["EDA", "Python","Pandas","MatPlotlib","Seaborn"], "url": "https://github.com/manojDOX/Play-Store-App-Review-Analysis-EDA", "imageUrl": "https://user-images.githubusercontent.com/123643720/247931627-f91aede9-5c8e-45fa-8c3d-cf352448f2ff.png" },
            { "name": "DTDC Shipment & Delivery Analysis Dashboard", "summary": "Developed a Power BI dashboard to analyze 50K+ shipments, identifying 'Express' as the most profitable service.", "keywords": ["Power BI", "KPI Analysis", "Logistics"], "url": "https://github.com/manojDOX/DTDC_KPI_Analysis", "imageUrl": "https://seeklogo.com/images/D/dtdc-logo-E5352A7467-seeklogo.com.png" },
            { "name": "Hospital Performance Dashboard", "summary": "Created a Power BI dashboard analyzing 4,600+ admissions to guide resource allocation.", "keywords": ["Power BI", "Healthcare", "Dashboard"], "url": "https://github.com/manojDOX/Hospital-Performance-Dashboard", "imageUrl": "https://tse4.mm.bing.net/th/id/OIP.S6oRDVH8bIKq9iR5RQnhUAHaF7?rs=1&pid=ImgDetMain&o=7&rm=3" },
            { "name": "Tokyo Olympics 2021 Dashboard", "summary": "Built an interactive Power BI report to analyze athlete participation, gender distribution, and medal counts.", "keywords": ["Power BI","Excel", "Dashboard"], "url": "https://github.com/manojDOX/Olympics-2021-PBI", "imageUrl": "https://pixelz.cc/wp-content/uploads/2017/12/tokyo-2020-summer-olympics-logo-uhd-4k-wallpaper.jpg" },
            { "name": "Medical Cost Analysis Dashboard", "summary": "Built a Power BI report analyzing medical insurance data to uncover cost patterns by age, gender, and region.", "keywords": ["Power BI","Excel", "Analysis"], "url": "https://github.com/manojDOX/Medical-Cost-Personal", "imageUrl": "https://play-lh.googleusercontent.com/r9xXKQBM0b8YCpECTkXQn9wYI2WXLG5otQZKJEUrbvINS7NvssUNOYx4BJA2npwSVQ" }
          ],
          "skills": [
            { "name": "Data Analysis Tools", "keywords": ["Excel", "Google Sheets", "Jupyter Notebook", "SQL"], "icon": "database-zap" },
            { "name": "Programming & Scripting", "keywords": ["Python", "Pandas", "NumPy", "matplotlib", "seaborn"], "icon": "code-2" },
            { "name": "Data Visualization", "keywords": ["Power BI", "Tableau", "matplotlib", "seaborn", "Plotly"], "icon": "bar-chart-3" },
            { "name": "Database & Querying", "keywords": ["MySQL", "PostgreSQL", "SQLite"], "icon": "database" },
            { "name": "Developer Tools", "keywords": ["Git", "GitHub", "VS Code", "Google Colab"], "icon": "terminal-square" }
          ]
        };

        // --- DOM Population ---
        document.getElementById('summary-content').innerHTML = resumeData.basics.summary;

        const projectsGrid = document.getElementById('projects-grid');
        resumeData.projects.forEach(project => {
            const projectCard = `
                <div class="card rounded-2xl p-6 shadow-lg hover:shadow-xl hover:-translate-y-2 transition-all duration-300 reveal">
                    <div class="h-40 mb-6 rounded-lg overflow-hidden bg-white p-4">
                        <img src="${project.imageUrl}" alt="${project.name} Logo" class="w-full h-full object-contain" onerror="this.onerror=null;this.src='https://placehold.co/400x200/cccccc/ffffff?text=Image+Not+Found';">
                    </div>
                    <h3 class="text-xl font-bold">${project.name}</h3>
                    <p class="mt-2 opacity-70 text-sm h-12">${project.summary}</p>
                    <div class="mt-6 flex justify-between items-center">
                        <div class="flex flex-wrap gap-2">
                            ${project.keywords.map(k => `<span class="text-xs font-semibold bg-primary/10 text-primary px-2 py-1 rounded-full">${k}</span>`).join('')}
                        </div>
                        <a href="${project.url}" target="_blank" rel="noopener noreferrer" class="text-primary hover:text-primary-dark transition-colors">
                            <i data-lucide="arrow-up-right" class="h-6 w-6"></i>
                        </a>
                    </div>
                </div>`;
            projectsGrid.innerHTML += projectCard;
        });

        const skillsContainer = document.getElementById('skills-container');
        resumeData.skills.forEach(category => {
            const skillCard = `
                <div class="card p-6 rounded-2xl shadow-lg reveal">
                    <div class="flex items-center gap-4">
                        <i data-lucide="${category.icon}" class="h-8 w-8 text-primary"></i>
                        <h3 class="text-xl font-bold">${category.name}</h3>
                    </div>
                    <div class="mt-4 flex flex-wrap gap-2">
                        ${category.keywords.map(k => `<span class="text-sm font-medium bg-gray-500/10 px-3 py-1 rounded-full">${k}</span>`).join('')}
                    </div>
                </div>`;
            skillsContainer.innerHTML += skillCard;
        });
        
        const socialLinksContainer = document.getElementById('social-links');
        resumeData.profiles.forEach(profile => {
            socialLinksContainer.innerHTML += `
                <a href="${profile.url}" target="_blank" rel="noopener noreferrer" class="opacity-70 hover:opacity-100 hover:text-primary transition-all">
                    <i data-lucide="${profile.icon}" class="h-6 w-6"></i>
                </a>`;
        });

        // --- Interactions ---
        lucide.createIcons();

        // Theme Toggle
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const html = document.documentElement;

        const savedTheme = localStorage.getItem('theme') || 'light';
        html.classList.toggle('dark', savedTheme === 'dark');
        themeIcon.setAttribute('data-lucide', savedTheme === 'dark' ? 'sun' : 'moon');
        lucide.createIcons();

        themeToggle.addEventListener('click', () => {
            html.classList.toggle('dark');
            const isDark = html.classList.contains('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            themeIcon.setAttribute('data-lucide', isDark ? 'sun' : 'moon');
            lucide.createIcons();
        });

        // Mobile Menu
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
        mobileMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => mobileMenu.classList.add('hidden'));
        });

        // Header Shadow on Scroll
        const header = document.getElementById('header');
        window.addEventListener('scroll', () => {
            header.classList.toggle('shadow-lg', window.scrollY > 10);
        });

        // Scroll Reveal Animations
        ScrollReveal().reveal('.reveal', {
            delay: 200,
            distance: '40px',
            origin: 'bottom',
            duration: 800,
            easing: 'cubic-bezier(0.5, 0, 0, 1)',
            interval: 150,
            reset: false,
        });
        
        // Copy Email
        const copyEmailBtn = document.getElementById('copy-email-btn');
        const copyNotification = document.getElementById('copy-notification');
        copyEmailBtn.addEventListener('click', () => {
            const email = "manoj2882003@gmail.com";
            const textarea = document.createElement('textarea');
            textarea.value = email;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            
            copyEmailBtn.textContent = 'Copied!';
            copyNotification.classList.remove('opacity-0', 'translate-y-4');
            
            setTimeout(() => {
                copyEmailBtn.textContent = 'Copy Email';
                copyNotification.classList.add('opacity-0', 'translate-y-4');
            }, 2000);
        });

        // --- Gemini API Integration ---
        const generateBtn = document.getElementById('generate-ideas-btn');
        const promptInput = document.getElementById('ai-prompt-input');
        const resultsContainer = document.getElementById('ai-results-container');
        const loader = document.getElementById('ai-loader');
        const apiKeyModal = document.getElementById('api-key-modal');
        const apiKeyInput = document.getElementById('api-key-input');
        const saveKeyBtn = document.getElementById('save-key-btn');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const apiKeyStatus = document.getElementById('api-key-status');

        function updateApiKeyStatus() {
            const apiKey = sessionStorage.getItem('geminiApiKey');
            if (apiKey) {
                apiKeyStatus.innerHTML = `API Key is set for this session. <button id="clear-key-btn" class="text-secondary underline">Clear</button>`;
                document.getElementById('clear-key-btn').addEventListener('click', () => {
                    sessionStorage.removeItem('geminiApiKey');
                    updateApiKeyStatus();
                });
            } else {
                apiKeyStatus.textContent = 'No API Key set. You will be prompted.';
            }
        }
        updateApiKeyStatus();

        closeModalBtn.addEventListener('click', () => apiKeyModal.classList.add('hidden'));
        
        saveKeyBtn.addEventListener('click', () => {
            const apiKey = apiKeyInput.value.trim();
            if (apiKey) {
                sessionStorage.setItem('geminiApiKey', apiKey);
                apiKeyModal.classList.add('hidden');
                updateApiKeyStatus();
                generateBtn.click(); // Automatically trigger generation after saving
            } else {
                alert('Please enter a valid API key.');
            }
        });

        generateBtn.addEventListener('click', async () => {
            let apiKey = sessionStorage.getItem('geminiApiKey');

            if (!apiKey) {
                apiKeyModal.classList.remove('hidden');
                lucide.createIcons(); // Re-render icons in modal
                return;
            }

            const userInput = promptInput.value.trim();
            if (!userInput) {
                alert("Please enter a topic.");
                return;
            }

            resultsContainer.innerHTML = '';
            loader.classList.remove('hidden');
            generateBtn.disabled = true;

            try {
                const prompt = `You are an expert career coach for data analysts. Based on the topic "${userInput}", generate three distinct data analysis project ideas. For each idea, provide a name, a one-sentence summary, and three key technologies that would be used.`;
                
                let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                const payload = {
                    contents: chatHistory,
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: "ARRAY",
                            items: {
                                type: "OBJECT",
                                properties: {
                                    "name": { "type": "STRING" },
                                    "summary": { "type": "STRING" },
                                    "technologies": {
                                        "type": "ARRAY",
                                        "items": { "type": "STRING" }
                                    }
                                },
                                required: ["name", "summary", "technologies"]
                            }
                        }
                    }
                };
                
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API request failed. Status: ${response.status}. Please check your API key and network connection.`);
                }

                const result = await response.json();
                
                if (result.candidates && result.candidates[0].content && result.candidates[0].content.parts[0].text) {
                    const ideas = JSON.parse(result.candidates[0].content.parts[0].text);
                    displayIdeas(ideas);
                } else {
                    throw new Error("Invalid response structure from API.");
                }

            } catch (error) {
                console.error("Error fetching from Gemini API:", error);
                resultsContainer.innerHTML = `<p class="text-center text-secondary col-span-full">${error.message}</p>`;
            } finally {
                loader.classList.add('hidden');
                generateBtn.disabled = false;
            }
        });

        function displayIdeas(ideas) {
            ideas.forEach(idea => {
                const ideaCard = `
                    <div class="card rounded-2xl p-6 shadow-lg reveal">
                        <h3 class="text-xl font-bold text-primary">${idea.name}</h3>
                        <p class="mt-2 opacity-70 text-sm h-16">${idea.summary}</p>
                        <div class="mt-4 flex flex-wrap gap-2">
                            ${idea.technologies.map(tech => `<span class="text-xs font-semibold bg-gray-500/10 px-2 py-1 rounded-full">${tech}</span>`).join('')}
                        </div>
                    </div>
                `;
                resultsContainer.innerHTML += ideaCard;
            });
            // Re-run ScrollReveal on new elements
            ScrollReveal().reveal(resultsContainer.querySelectorAll('.reveal'), {
                delay: 100,
                distance: '20px',
                origin: 'bottom',
                duration: 600,
                interval: 100,
                reset: false,
            });
        }

    </script>
</body>
</html>
